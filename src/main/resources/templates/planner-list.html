<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ì—¬í–‰ í”Œë˜ë„ˆ - æ—¥æœ¬ Travel LMS</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/planner.css}">
</head>
<body>
    <!-- í—¤ë” -->
    <th:block th:replace="~{fragments/main-header :: mainHeader}"></th:block>

    <main class="planner-list-page">
        <div class="planner-list-container">
            <!-- í—¤ë” -->
            <div class="planner-list-header">
                <div>
                    <h1>ë‚´ ì—¬í–‰ í”Œë˜ë„ˆ</h1>
                    <p>ë…¸ì…˜ ìŠ¤íƒ€ì¼ë¡œ ì—¬í–‰ì„ ì²´ê³„ì ìœ¼ë¡œ ê³„íší•˜ì„¸ìš”</p>
                </div>
                <button type="button" class="btn-new-planner" onclick="openCreateModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"/>
                        <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    ìƒˆ í”Œë˜ë„ˆ ë§Œë“¤ê¸°
                </button>
            </div>

            <!-- í”Œë˜ë„ˆ ëª©ë¡ -->
            <div id="plannerGrid" class="planner-cards-grid">
                <!-- ë„ì¿„ 3ë°• 4ì¼ ë²šê½ƒ ì—¬í–‰ -->
                <a href="/planner/detail/1" class="planner-card">
                    <div class="planner-card-image">
                        <img src="https://images.unsplash.com/photo-1589085947432-382469c8bdab?w=600&q=80"
                             alt="ë„ì¿„ 3ë°• 4ì¼ ë²šê½ƒ ì—¬í–‰">
                    </div>
                    <div class="planner-card-content">
                        <h3 class="planner-card-title">ë„ì¿„ 3ë°• 4ì¼ ë²šê½ƒ ì—¬í–‰</h3>
                        <div class="planner-card-info">
                            <div class="planner-card-info-item">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                    <circle cx="12" cy="10" r="3"/>
                                </svg>
                                <span>ë„ì¿„, ì¼ë³¸</span>
                            </div>
                            <div class="planner-card-info-item">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                </svg>
                                <span>2026-03-20 ~ 2026-03-23</span>
                            </div>
                        </div>
                        <div class="planner-card-footer">
                            <span class="planner-card-days">4ì¼</span>
                            <button type="button" class="btn-delete-planner" onclick="event.preventDefault(); deletePlanner(1)">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"/>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </a>

                <!-- ì˜¤ì‚¬ì¹´ ë§›ì§‘ íˆ¬ì–´ -->
                <a href="/planner/detail/2" class="planner-card">
                    <div class="planner-card-image">
                        <img src="https://images.unsplash.com/photo-1590559899731-a382839e5549?w=600&q=80"
                             alt="ì˜¤ì‚¬ì¹´ ë§›ì§‘ íˆ¬ì–´">
                    </div>
                    <div class="planner-card-content">
                        <h3 class="planner-card-title">ì˜¤ì‚¬ì¹´ ë§›ì§‘ íˆ¬ì–´</h3>
                        <div class="planner-card-info">
                            <div class="planner-card-info-item">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                    <circle cx="12" cy="10" r="3"/>
                                </svg>
                                <span>ì˜¤ì‚¬ì¹´, ì¼ë³¸</span>
                            </div>
                            <div class="planner-card-info-item">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                </svg>
                                <span>2026-04-10 ~ 2026-04-14</span>
                            </div>
                        </div>
                        <div class="planner-card-footer">
                            <span class="planner-card-days">5ì¼</span>
                            <button type="button" class="btn-delete-planner" onclick="event.preventDefault(); deletePlanner(2)">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"/>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </a>

                <!-- êµí†  ì‚¬ì°° ìˆœë¡€ -->
                <a href="/planner/detail/3" class="planner-card">
                    <div class="planner-card-image">
                        <img src="https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?w=600&q=80"
                             alt="êµí†  ì‚¬ì°° ìˆœë¡€">
                    </div>
                    <div class="planner-card-content">
                        <h3 class="planner-card-title">êµí†  ì‚¬ì°° ìˆœë¡€</h3>
                        <div class="planner-card-info">
                            <div class="planner-card-info-item">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                    <circle cx="12" cy="10" r="3"/>
                                </svg>
                                <span>êµí† , ì¼ë³¸</span>
                            </div>
                            <div class="planner-card-info-item">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                </svg>
                                <span>2026-05-01 ~ 2026-05-03</span>
                            </div>
                        </div>
                        <div class="planner-card-footer">
                            <span class="planner-card-days">3ì¼</span>
                            <button type="button" class="btn-delete-planner" onclick="event.preventDefault(); deletePlanner(3)">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"/>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </a>
            </div>

            <!-- ë¹ˆ ìƒíƒœ (í”Œë˜ë„ˆê°€ ì—†ì„ ë•Œ) -->
            <div id="plannerEmpty" class="planner-empty" style="display: none;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                    <circle cx="12" cy="10" r="3"/>
                </svg>
                <h3>ì•„ì§ ì—¬í–‰ í”Œë˜ë„ˆê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                <p>ì²« ì—¬í–‰ ê³„íšì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>
                <button type="button" class="btn-empty-create" onclick="openCreateModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"/>
                        <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    ìƒˆ í”Œë˜ë„ˆ ë§Œë“¤ê¸°
                </button>
            </div>
        </div>
    </main>

    <!-- í”Œë˜ë„ˆ ìƒì„± ëª¨ë‹¬ -->
    <div id="createModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ìƒˆ ì—¬í–‰ í”Œë˜ë„ˆ ë§Œë“¤ê¸°</h2>
                <button type="button" class="btn-modal-close" onclick="closeCreateModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>

            <form id="createPlannerForm" onsubmit="submitCreatePlanner(event)">
                <div class="modal-body">
                    <!-- ì—¬í–‰ ì œëª© -->
                    <div class="form-group">
                        <label for="plannerTitle">ì—¬í–‰ ì œëª©</label>
                        <input type="text" id="plannerTitle" name="title" class="form-input"
                               placeholder="ì˜ˆ: ë„ì¿„ ë²šê½ƒ ì—¬í–‰" required>
                    </div>

                    <!-- ì—¬í–‰ì§€ -->
                    <div class="form-group">
                        <label for="plannerDestination">ì—¬í–‰ì§€</label>
                        <div class="form-input-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                <circle cx="12" cy="10" r="3"/>
                            </svg>
                            <input type="text" id="plannerDestination" name="destination" class="form-input"
                                   placeholder="ë„ì‹œ, ì§€ì—­ ì…ë ¥" required>
                        </div>
                    </div>

                    <!-- ë‚ ì§œ -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="plannerStartDate">ì‹œì‘ì¼</label>
                            <div class="form-input-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                </svg>
                                <input type="date" id="plannerStartDate" name="startDate" class="form-input" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="plannerEndDate">ì¢…ë£Œì¼</label>
                            <div class="form-input-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                </svg>
                                <input type="date" id="plannerEndDate" name="endDate" class="form-input" required>
                            </div>
                        </div>
                    </div>

                    <!-- í…œí”Œë¦¿ ì„ íƒ -->
                    <div class="form-group">
                        <label>í…œí”Œë¦¿ ì„ íƒ</label>
                        <div class="template-grid">
                            <div class="template-option selected" data-template="blank" onclick="selectTemplate(this)">
                                <div class="template-option-icon">ğŸ“</div>
                                <div class="template-option-name">ë¹ˆ í”Œë˜ë„ˆ</div>
                            </div>
                            <div class="template-option" data-template="city" onclick="selectTemplate(this)">
                                <div class="template-option-icon">ğŸ™ï¸</div>
                                <div class="template-option-name">ë„ì‹œ íƒë°©</div>
                            </div>
                            <div class="template-option" data-template="nature" onclick="selectTemplate(this)">
                                <div class="template-option-icon">ğŸ”ï¸</div>
                                <div class="template-option-name">ìì—° ì—¬í–‰</div>
                            </div>
                            <div class="template-option" data-template="food" onclick="selectTemplate(this)">
                                <div class="template-option-icon">ğŸœ</div>
                                <div class="template-option-name">ë§›ì§‘ íˆ¬ì–´</div>
                            </div>
                            <div class="template-option" data-template="culture" onclick="selectTemplate(this)">
                                <div class="template-option-icon">â›©ï¸</div>
                                <div class="template-option-name">ë¬¸í™” ì²´í—˜</div>
                            </div>
                            <div class="template-option" data-template="shopping" onclick="selectTemplate(this)">
                                <div class="template-option-icon">ğŸ›ï¸</div>
                                <div class="template-option-name">ì‡¼í•‘ ì—¬í–‰</div>
                            </div>
                        </div>
                        <input type="hidden" id="plannerTemplate" name="template" value="blank">
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn-modal-cancel" onclick="closeCreateModal()">ì·¨ì†Œ</button>
                    <button type="submit" class="btn-modal-submit">í”Œë˜ë„ˆ ë§Œë“¤ê¸°</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // í—¤ë” ë„¤ë¹„ê²Œì´ì…˜ í™œì„±í™”
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.header-nav a');
            navLinks.forEach(link => {
                if (link.getAttribute('href').includes('/planner')) {
                    link.classList.add('active');
                }
            });
        });

        // ëª¨ë‹¬ ì—´ê¸°
        function openCreateModal() {
            document.getElementById('createModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeCreateModal() {
            document.getElementById('createModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // í…œí”Œë¦¿ ì„ íƒ
        function selectTemplate(element) {
            document.querySelectorAll('.template-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            document.getElementById('plannerTemplate').value = element.dataset.template;
        }

        // í”Œë˜ë„ˆ ìƒì„± ì œì¶œ
        function submitCreatePlanner(event) {
            event.preventDefault();

            const formData = {
                title: document.getElementById('plannerTitle').value,
                destination: document.getElementById('plannerDestination').value,
                startDate: document.getElementById('plannerStartDate').value,
                endDate: document.getElementById('plannerEndDate').value,
                template: document.getElementById('plannerTemplate').value
            };

            // TODO: ì„œë²„ API í˜¸ì¶œ
            console.log('Creating planner:', formData);

            // ì„ì‹œë¡œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™
            const newId = Date.now();
            window.location.href = '/planner/detail/' + newId;
        }

        // í”Œë˜ë„ˆ ì‚­ì œ
        function deletePlanner(id) {
            if (confirm('ì •ë§ ì´ í”Œë˜ë„ˆë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // TODO: ì„œë²„ API í˜¸ì¶œ
                console.log('Deleting planner:', id);

                // ì„ì‹œë¡œ ì¹´ë“œ ì œê±°
                const card = document.querySelector(`a[href="/planner/detail/${id}"]`);
                if (card) {
                    card.remove();
                }

                // ë‚¨ì€ ì¹´ë“œ í™•ì¸
                const remainingCards = document.querySelectorAll('.planner-card');
                if (remainingCards.length === 0) {
                    document.getElementById('plannerGrid').style.display = 'none';
                    document.getElementById('plannerEmpty').style.display = 'flex';
                }
            }
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('createModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCreateModal();
            }
        });

        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeCreateModal();
            }
        });
    </script>
</body>
</html>
